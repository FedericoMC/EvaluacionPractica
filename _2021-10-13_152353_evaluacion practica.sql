/*!40101 SET NAMES utf8 */;
/*!40014 SET FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/ evaluacion practica /*!40100 DEFAULT CHARACTER SET utf8mb4 */;
USE evaluacion practica;

DROP TABLE IF EXISTS categorias;
CREATE TABLE `categorias` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `categoria1` varchar(100) NOT NULL,
  `categoria2` varchar(100) DEFAULT NULL,
  `categoria3` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4;

DROP TABLE IF EXISTS notas;
CREATE TABLE `notas` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fecha_creacion` datetime DEFAULT NULL,
  `fecha_modificacion` datetime DEFAULT NULL,
  `descripcion` text NOT NULL,
  `borrar` tinyint(4) DEFAULT NULL,
  `usuarioID` int(11) NOT NULL,
  `titulo` varchar(100) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `usuarioID` (`usuarioID`),
  CONSTRAINT `notas_ibfk_1` FOREIGN KEY (`usuarioID`) REFERENCES `usuarios` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8mb4;

DROP TABLE IF EXISTS notas_categoria;
CREATE TABLE `notas_categoria` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `notaID` int(11) NOT NULL,
  `categoriaID` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `notaID` (`notaID`),
  KEY `categoriaID` (`categoriaID`),
  CONSTRAINT `notas_categoria_ibfk_1` FOREIGN KEY (`notaID`) REFERENCES `notas` (`id`),
  CONSTRAINT `notas_categoria_ibfk_2` FOREIGN KEY (`categoriaID`) REFERENCES `categorias` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8mb4;

DROP TABLE IF EXISTS usuarios;
CREATE TABLE `usuarios` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(100) NOT NULL,
  `email` varchar(100) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=42 DEFAULT CHARSET=utf8mb4;

INSERT INTO categorias(id,categoria1,categoria2,categoria3) VALUES(1,'Ocio',NULL,NULL),(2,'','TO-DO',NULL),(3,'',NULL,'Compras');

INSERT INTO notas(id,fecha_creacion,fecha_modificacion,descripcion,borrar,usuarioID,titulo) VALUES(1,'2021-10-13 14:50:38','2021-10-13 14:50:38',X'54656e676f20717565206c65657220486172727920506f747465722c20556e20656c6566616e7465206f63757061206d7563686f206573706163696f',1,32,'Libros'),(2,'2021-10-13 15:05:54','2021-10-13 15:05:54',X'4c6f732070726f78696d6f73206a7565676f732071756520766f792061206a7567617220736f6e2c206869746d616e20332c204d6f6e737465722048756e7465722079205761726372616674',1,39,'Videojuegos'),(3,'2021-10-13 15:06:04','2021-10-13 15:06:04',X'4d652074656e676f2071756520636f6d7072617220756e206c6170697a206c616269616c2c20756e6173206261736573207920756e6f7320636f72726563746f726573',0,38,'Cosmeticos'),(4,'2021-10-13 15:06:06','2021-10-13 15:06:06',X'50726f78696d6f73206d616e6761732061206c6565723a2068616a696d65206e6f206970706f2c206265727365726b2c206d6f6e737465722079206f6e65207069656365',0,36,'Mangas'),(5,'2021-10-13 15:06:08','2021-10-13 15:06:08',X'4d69206c69737461206465206d6973206172746973746173206661766f7269746f733a20476f72696c6c617a2c205477656e7479206f6e652070696c6f74732c205472617669732053636f747420',0,34,'Artistas'),(6,'2021-10-13 15:07:14','2021-10-13 15:07:14',X'5061726120717565206c61732070617061732071756564656e2073757065722063726f63616e746573206c61732074656e676f2071756520686572766972203330206d696e75746f7320636f6e206269636172626f6e61746f20646520736f64696f2079206465737075657320616c20686f726e6f',1,41,'Receta'),(7,'2021-10-13 15:07:17','2021-10-13 15:07:17',X'4c6f7320676173746f732064652065737465206d657320736f6e3a206c757a20313530302c20676173203330302c2061677561203135302c20696e7465726e65742033303030',0,37,'Gastos'),(8,'2021-10-13 15:07:18','2021-10-13 15:07:18',X'4c612066696e616c206465206c61204e424120323032322076612061207365722057617272696f73205653204e657473',1,40,'Prediccion'),(9,'2021-10-13 15:07:19','2021-10-13 15:07:19',X'51756965726f20697220616c207265636974616c2064652049726f6e204d616964656e2c2041737370657261207920416c6d61667565727465',1,35,'Recitales'),(10,'2021-10-13 15:07:21','2021-10-13 15:07:21',X'4d652071756965726f2069722061204175737472616c69612c20436f6c6f6d6269612c204a61706f6e2079204672616e636961',0,33,'Viajes');

INSERT INTO notas_categoria(id,notaID,categoriaID) VALUES(1,8,1),(2,1,3),(3,7,3),(4,5,3),(5,9,1),(6,6,2),(7,2,1),(8,10,2),(9,4,1),(10,3,3);
INSERT INTO usuarios(id,nombre,email) VALUES(32,'Emilio','emilio@gmail.com'),(33,'Martin','martin@gmail.com'),(34,'Carla','carla@gmail.com'),(35,'Maria','maria@gmail.com'),(36,'Leila','leila@gmail.com'),(37,'Eren','eren@gmail.com'),(38,'Mikasa','mikasa@gmail.com'),(39,'Roberto','roberto@gmail.com'),(40,'Juan','juan@gmail.com'),(41,'Mario','mario@gmail.com');